<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Is It Up?</title>
  <link type="text/css" rel="stylesheet" href="../styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<header>
  <table class="head">
      <th class="home"><a href="../index.html"><img class="favicon" src="../Pictures/up-and-down-arrows-colored.png" alt="home">Home Page</a></th>
      <th class="announcements"><a href="../Announcement.html">Announcements</a></th>
      <th class="about_us"><a href="../About.html">About Us</a></th>
  </table>
  <h1 class="website_name"><img class="faviconHead" src="../Pictures/up-and-down-arrows-colored.png">Is It Up?</h1>
</header>

<body>
  <h2>Employees</h2>
  <table id="data">
    <thead>
      <tr>
        <th>User ID</th>
        <th>Site Name</th>
        <th>Most Recent Access Date</th>
        <th>Total Pings</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    async function fetchData() {
      const response = await fetch('/userData');
      const data = await response.json();
      const dataTable = document.getElementById('data').getElementsByTagName('tbody')[0];
      dataTable.innerHTML = '';

      data.forEach(user => {
        const newRow = dataTable.insertRow();
        newRow.innerHTML = `
          <td>${user.id}</td>
          <td>${user.siteName}</td>
          <td>${user.recentDate}</td>
          <td>${user.totalPings}</td>
        `;
      });
    }

    fetchData();
  </script>

<footer>
  <table class="foot">
      <th class="creators">Created by: Ethan Penniman, Matthew Fairneny, Nicholas Bragdon, Brian Hoyt</th>
      <th class="designed_date">Designed On: 3/6/2023</th>
      <th class="current_date" id="date">Current Date: <!--Javascript variable for current date goes here--> </th>
  </table>
  <script>
      n =  new Date();
      y = n.getFullYear();
      m = n.getMonth() + 1;
      d = n.getDate();
      document.getElementById("date").innerHTML ="Current Date: " +  m + "/" + d + "/" + y;
  </script>
</footer>

</body>
</html>